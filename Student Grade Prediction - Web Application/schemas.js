const BaseJoi = require('joi');
const sanitizeHtml = require('sanitize-html');

const extension = (joi) => ({
    type: 'string',
    base: joi.string(),
    messages: {
        'string.escapeHTML': '{{#label}} must not include HTML!'
    },
    rules: {
        escapeHTML: {
            validate(value, helpers) {
                const clean = sanitizeHtml(value, {
                    allowedTags: [],
                    allowedAttributes: {},
                });
                if (clean !== value) return helpers.error('string.escapeHTML', { value })
                return clean;
            }
        }
    }
});

const Joi = BaseJoi.extend(extension)

module.exports.predictSchema = Joi.object({
    semesterone: Joi.object({
        name: Joi.string().required().escapeHTML(),
        registerNumber: Joi.number().required(),
        dob: Joi.date().required(),
        gender: Joi.string().required().escapeHTML(),
        studentEmail: Joi.string().required().escapeHTML(),
        course_code_1: Joi.string().required().escapeHTML(),
        course_part_1: Joi.number().required(),
        course_title_1: Joi.string().required().escapeHTML(),
        course_credits_1: Joi.number().required(),
        course_grade_points_1: Joi.number().required(),
        course_grade_1: Joi.string().required().escapeHTML(),
        course_code_2: Joi.string().required().escapeHTML(),
        course_part_2: Joi.number().required(),
        course_title_2: Joi.string().required().escapeHTML(),
        course_credits_2: Joi.number().required(),
        course_grade_points_2: Joi.number().required(),
        course_grade_2: Joi.string().required().escapeHTML(),
        course_code_3: Joi.string().required().escapeHTML(),
        course_part_3: Joi.number().required(),
        course_title_3: Joi.string().required().escapeHTML(),
        course_credits_3: Joi.number().required(),
        course_grade_points_3: Joi.number().required(),
        course_grade_3: Joi.string().required().escapeHTML(),
        course_code_4: Joi.string().required().escapeHTML(),
        course_part_4: Joi.number().required(),
        course_title_4: Joi.string().required().escapeHTML(),
        course_credits_4: Joi.number().required(),
        course_grade_points_4: Joi.number().required(),
        course_grade_4: Joi.string().required().escapeHTML(),
        course_code_5: Joi.string().required().escapeHTML(),
        course_part_5: Joi.number().required(),
        course_title_5: Joi.string().required().escapeHTML(),
        course_credits_5: Joi.number().required(),
        course_grade_points_5: Joi.number().required(),
        course_grade_5: Joi.string().required().escapeHTML(),
        course_code_6: Joi.string().required().escapeHTML(),
        course_part_6: Joi.number().required(),
        course_title_6: Joi.string().required().escapeHTML(),
        course_credits_6: Joi.number().required(),
        course_grade_points_6: Joi.number().required(),
        course_grade_6: Joi.string().required().escapeHTML(),
        course_code_7: Joi.string().required().escapeHTML(),
        course_part_7: Joi.number().required(),
        course_title_7: Joi.string().required().escapeHTML(),
        course_credits_7: Joi.number().required(),
        course_grade_points_7: Joi.number().required(),
        course_grade_7: Joi.string().required().escapeHTML(),
        course_code_8: Joi.string().required().escapeHTML(),
        course_part_8: Joi.number().required(),
        course_title_8: Joi.string().required().escapeHTML(),
        course_credits_8: Joi.number().required(),
        course_grade_points_8: Joi.number().required(),
        course_grade_8: Joi.string().required().escapeHTML(),
    }).required(),
    semestertwo: Joi.object({
        course_code_1: Joi.string().required().escapeHTML(),
        course_part_1: Joi.number().required(),
        course_title_1: Joi.string().required().escapeHTML(),
        course_credits_1: Joi.number().required(),
        course_grade_points_1: Joi.number().required(),
        course_grade_1: Joi.string().required().escapeHTML(),
        course_code_2: Joi.string().required().escapeHTML(),
        course_part_2: Joi.number().required(),
        course_title_2: Joi.string().required().escapeHTML(),
        course_credits_2: Joi.number().required(),
        course_grade_points_2: Joi.number().required(),
        course_grade_2: Joi.string().required().escapeHTML(),
        course_code_3: Joi.string().required().escapeHTML(),
        course_part_3: Joi.number().required(),
        course_title_3: Joi.string().required().escapeHTML(),
        course_credits_3: Joi.number().required(),
        course_grade_points_3: Joi.number().required(),
        course_grade_3: Joi.string().required().escapeHTML(),
        course_code_4: Joi.string().required().escapeHTML(),
        course_part_4: Joi.number().required(),
        course_title_4: Joi.string().required().escapeHTML(),
        course_credits_4: Joi.number().required(),
        course_grade_points_4: Joi.number().required(),
        course_grade_4: Joi.string().required().escapeHTML(),
        course_code_5: Joi.string().required().escapeHTML(),
        course_part_5: Joi.number().required(),
        course_title_5: Joi.string().required().escapeHTML(),
        course_credits_5: Joi.number().required(),
        course_grade_points_5: Joi.number().required(),
        course_grade_5: Joi.string().required().escapeHTML(),
        course_code_6: Joi.string().required().escapeHTML(),
        course_part_6: Joi.number().required(),
        course_title_6: Joi.string().required().escapeHTML(),
        course_credits_6: Joi.number().required(),
        course_grade_points_6: Joi.number().required(),
        course_grade_6: Joi.string().required().escapeHTML(),
        course_code_7: Joi.string().required().escapeHTML(),
        course_part_7: Joi.number().required(),
        course_title_7: Joi.string().required().escapeHTML(),
        course_credits_7: Joi.number().required(),
        course_grade_points_7: Joi.number().required(),
        course_grade_7: Joi.string().required().escapeHTML(),
        course_code_8: Joi.string().required().escapeHTML(),
        course_part_8: Joi.number().required(),
        course_title_8: Joi.string().required().escapeHTML(),
        course_credits_8: Joi.number().required(),
        course_grade_points_8: Joi.number().required(),
        course_grade_8: Joi.string().required().escapeHTML(),
    }).required(),
    semesterthree: Joi.object({
        course_code_1: Joi.string().required().escapeHTML(),
        course_part_1: Joi.number().required(),
        course_title_1: Joi.string().required().escapeHTML(),
        course_credits_1: Joi.number().required(),
        course_grade_points_1: Joi.number().required(),
        course_grade_1: Joi.string().required().escapeHTML(),
        course_code_2: Joi.string().required().escapeHTML(),
        course_part_2: Joi.number().required(),
        course_title_2: Joi.string().required().escapeHTML(),
        course_credits_2: Joi.number().required(),
        course_grade_points_2: Joi.number().required(),
        course_grade_2: Joi.string().required().escapeHTML(),
        course_code_3: Joi.string().required().escapeHTML(),
        course_part_3: Joi.number().required(),
        course_title_3: Joi.string().required().escapeHTML(),
        course_credits_3: Joi.number().required(),
        course_grade_points_3: Joi.number().required(),
        course_grade_3: Joi.string().required().escapeHTML(),
        course_code_4: Joi.string().required().escapeHTML(),
        course_part_4: Joi.number().required(),
        course_title_4: Joi.string().required().escapeHTML(),
        course_credits_4: Joi.number().required(),
        course_grade_points_4: Joi.number().required(),
        course_grade_4: Joi.string().required().escapeHTML(),
        course_code_5: Joi.string().required().escapeHTML(),
        course_part_5: Joi.number().required(),
        course_title_5: Joi.string().required().escapeHTML(),
        course_credits_5: Joi.number().required(),
        course_grade_points_5: Joi.number().required(),
        course_grade_5: Joi.string().required().escapeHTML(),
        course_code_6: Joi.string().required().escapeHTML(),
        course_part_6: Joi.number().required(),
        course_title_6: Joi.string().required().escapeHTML(),
        course_credits_6: Joi.number().required(),
        course_grade_points_6: Joi.number().required(),
        course_grade_6: Joi.string().required().escapeHTML(),
        course_code_7: Joi.string().required().escapeHTML(),
        course_part_7: Joi.number().required(),
        course_title_7: Joi.string().required().escapeHTML(),
        course_credits_7: Joi.number().required(),
        course_grade_points_7: Joi.number().required(),
        course_grade_7: Joi.string().required().escapeHTML(),
        course_code_8: Joi.string().required().escapeHTML(),
        course_part_8: Joi.number().required(),
        course_title_8: Joi.string().required().escapeHTML(),
        course_credits_8: Joi.number().required(),
        course_grade_points_8: Joi.number().required(),
        course_grade_8: Joi.string().required().escapeHTML(),
    }).required(),
    semesterfour: Joi.object({
        course_code_1: Joi.string().required().escapeHTML(),
        course_part_1: Joi.number().required(),
        course_title_1: Joi.string().required().escapeHTML(),
        course_credits_1: Joi.number().required(),
        course_grade_points_1: Joi.number().required(),
        course_grade_1: Joi.string().required().escapeHTML(),
        course_code_2: Joi.string().required().escapeHTML(),
        course_part_2: Joi.number().required(),
        course_title_2: Joi.string().required().escapeHTML(),
        course_credits_2: Joi.number().required(),
        course_grade_points_2: Joi.number().required(),
        course_grade_2: Joi.string().required().escapeHTML(),
        course_code_3: Joi.string().required().escapeHTML(),
        course_part_3: Joi.number().required(),
        course_title_3: Joi.string().required().escapeHTML(),
        course_credits_3: Joi.number().required(),
        course_grade_points_3: Joi.number().required(),
        course_grade_3: Joi.string().required().escapeHTML(),
        course_code_4: Joi.string().required().escapeHTML(),
        course_part_4: Joi.number().required(),
        course_title_4: Joi.string().required().escapeHTML(),
        course_credits_4: Joi.number().required(),
        course_grade_points_4: Joi.number().required(),
        course_grade_4: Joi.string().required().escapeHTML(),
        course_code_5: Joi.string().required().escapeHTML(),
        course_part_5: Joi.number().required(),
        course_title_5: Joi.string().required().escapeHTML(),
        course_credits_5: Joi.number().required(),
        course_grade_points_5: Joi.number().required(),
        course_grade_5: Joi.string().required().escapeHTML(),
        course_code_6: Joi.string().required().escapeHTML(),
        course_part_6: Joi.number().required(),
        course_title_6: Joi.string().required().escapeHTML(),
        course_credits_6: Joi.number().required(),
        course_grade_points_6: Joi.number().required(),
        course_grade_6: Joi.string().required().escapeHTML(),
        course_code_7: Joi.string().required().escapeHTML(),
        course_part_7: Joi.number().required(),
        course_title_7: Joi.string().required().escapeHTML(),
        course_credits_7: Joi.number().required(),
        course_grade_points_7: Joi.number().required(),
        course_grade_7: Joi.string().required().escapeHTML(),
        course_code_8: Joi.string().required().escapeHTML(),
        course_part_8: Joi.number().required(),
        course_title_8: Joi.string().required().escapeHTML(),
        course_credits_8: Joi.number().required(),
        course_grade_points_8: Joi.number().required(),
        course_grade_8: Joi.string().required().escapeHTML(),
    }).required()
});
